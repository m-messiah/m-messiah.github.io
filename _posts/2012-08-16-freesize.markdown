---
layout: post
status: publish
published: true
title: Свободное место на диске
author: ––=Messiλh=––
author_login: Messiah
author_email: m.muzafarov@gmail.com
author_url: http://m.muzafarov.vk.com
excerpt: "<h2>du, dh, ls<&#47;h2>\r\n&nbsp;\r\n\r\n"
wordpress_id: 209
wordpress_url: http://messiah.ks8.ru/?p=209
date: 2012-08-16 13:25:01.000000000 +06:00
categories:
- Linux
tags: []
comments: []
---
<h2>du, dh, ls<&#47;h2>
&nbsp;

<a id="more"></a><a id="more-209"></a>
<h2><&#47;h2>
<h2>1. Просмотр размеров файлов:<&#47;h2>
Тут нас спасает старый-добрый ls но с ключом -s (size):
<pre class="brush: bash; gutter: false">ls -s

12 genkernel.conf
156 lynx.cfg
168 ld.so.cache<&#47;pre>
Делает вывод в килобайтах.
Конечно же, хочется более удобный формат, что решается добавлением ключа -h (--human-readable):
<pre class="brush: bash; gutter: false">ls -sh

12K genkernel.conf
156K lynx.cfg
168K ld.so.cache<&#47;pre>
Ну и не стоит забывать, что опция -l, позволяет выводить гораздо больше информации о файлах,
где одним из полей будет размер. (также допускается использование ключа -h)
<pre class="brush: bash; gutter: false">ls -lh

-rw-r--r-- 1 root root 8,9K авг.  11 08:13 genkernel.conf
-rw-r--r-- 1 root root 153K авг.  12 11:53 lynx.cfg
-rw-r--r-- 1 root root 166K авг.  16 10:09 ld.so.cache<&#47;pre>
Как можно было заметить в экспериментах, любая папка в выводе команды ls -s имеет размер 4Кб.
Хотелось бы понимать, каков же её реальный размер, со всеми лежащими в ней файлами.
<h2>2. Просмотр размеров папок<&#47;h2>
Команда du покажет рекурсивно размеры всех директорий, лежащих в данной, либо по заданному пути.
Также допускается использование ключа -h для более понятного вывода.
<pre class="brush: bash; gutter: false">du -h &#47;etc

4,0K    .&#47;ca-certificates&#47;update.d
8,0K    .&#47;ca-certificates
28K     .&#47;sgml
20K     .&#47;gpm
4,0K    .&#47;cron.d
8,0K    .&#47;chromium
8,0K    .&#47;gtk-2.0&#47;x86_64-pc-linux-gnu
20K     .&#47;gtk-2.0
20K     .&#47;samsung-tools&#47;scripts
32K     .&#47;samsung-tools
12K     .&#47;obex-data-server
4,4M    .<&#47;pre>
Так как du просматривает все папки рекурсивно поиском в глубину, то и вывод происходит обратных ходом по графу, что иногда может запутать. Поэтому рекомендуется, всё же перенаправлять вывод на дальнейшую обработку, например grep.

Одним из важных по удобству ключей команды du является ключ --max-depth=N, где N произвольное целое число больше, либо равное 0. На практике наиболее полезно max-depth=1 - Выводить размеры папок, непосредственно лежащих в данной.
<h2>3. Свободное место на носителях<&#47;h2>
В таком случае поможет команда df (или лучше она же с ключом -h)

Ну тут, я думаю, всё понятно:
<pre class="brush: bash; gutter: false">Файловая система Размер Использовано  Дост Использовано% Cмонтировано в
rootfs              30G          11G   18G           38% &#47;
udev                10M            0   10M            0% &#47;dev
&#47;dev&#47;sda7           30G          11G   18G           38% &#47;
tmpfs             1000M         312K 1000M            1% &#47;run
&#47;dev&#47;sda6          187G          95G   92G           51% &#47;files<&#47;pre>
Приятного пользования!
